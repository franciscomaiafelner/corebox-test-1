{% extends 'base.html' %}
{% block title %}My Subscriptions â€” Marketplace{% endblock %}
{% block content %}
  <section>
    <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
      <h1>My Subscriptions</h1>
      {% if has_portal %}
        <a class="btn" href="{{ url_for('billing_portal') }}">Manage Subscription</a>
      {% endif %}
    </div>

    {% if not subs %}
      <p class="muted">You have no subscriptions yet.</p>
      <p><a class="btn" href="{{ url_for('home') }}">Browse Products</a></p>
    {% else %}
      <div class="list">
        {% for s in subs %}
          <div class="item" style="display:flex; align-items:center; gap:12px; justify-content:space-between; background: var(--card); padding: 12px; border-radius: 8px; margin-bottom: 10px;">
            <div>
              <div><a href="{{ url_for('product_page', slug=s.slug) }}">{{ s.title }}</a></div>
              <div class="small muted">{{ s.price_cents | usd }} / month</div>
              <div class="small">Status: <strong>{{ s.status }}</strong></div>
            </div>
            <div class="small muted">Manage via the button above</div>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </section>
{% endblock %}
